function _0x41a5(_0x54a023,_0x37853b){var _0x193940=_0x1939();return _0x41a5=function(_0x50e05f,_0x1ab680){_0x50e05f=_0x50e05f-0x192;var _0xa4b3a5=_0x193940[_0x50e05f];if(_0x41a5['zWxJFr']===undefined){var _0x42d8ee=function(_0x2664e3){var _0x4e93c0='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';var _0x94f801='',_0x15af17='';for(var _0x472520=0x0,_0x321f27,_0x41a569,_0x442aa3=0x0;_0x41a569=_0x2664e3['charAt'](_0x442aa3++);~_0x41a569&&(_0x321f27=_0x472520%0x4?_0x321f27*0x40+_0x41a569:_0x41a569,_0x472520++%0x4)?_0x94f801+=String['fromCharCode'](0xff&_0x321f27>>(-0x2*_0x472520&0x6)):0x0){_0x41a569=_0x4e93c0['indexOf'](_0x41a569);}for(var _0x33314d=0x0,_0x49a8d1=_0x94f801['length'];_0x33314d<_0x49a8d1;_0x33314d++){_0x15af17+='%'+('00'+_0x94f801['charCodeAt'](_0x33314d)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x15af17);};var _0x2f6775=function(_0x423dc1,_0x1b59fa){var _0xc3329a=[],_0x3d5119=0x0,_0x51bade,_0x148470='';_0x423dc1=_0x42d8ee(_0x423dc1);var _0x2872c2;for(_0x2872c2=0x0;_0x2872c2<0x100;_0x2872c2++){_0xc3329a[_0x2872c2]=_0x2872c2;}for(_0x2872c2=0x0;_0x2872c2<0x100;_0x2872c2++){_0x3d5119=(_0x3d5119+_0xc3329a[_0x2872c2]+_0x1b59fa['charCodeAt'](_0x2872c2%_0x1b59fa['length']))%0x100,_0x51bade=_0xc3329a[_0x2872c2],_0xc3329a[_0x2872c2]=_0xc3329a[_0x3d5119],_0xc3329a[_0x3d5119]=_0x51bade;}_0x2872c2=0x0,_0x3d5119=0x0;for(var _0x4b5376=0x0;_0x4b5376<_0x423dc1['length'];_0x4b5376++){_0x2872c2=(_0x2872c2+0x1)%0x100,_0x3d5119=(_0x3d5119+_0xc3329a[_0x2872c2])%0x100,_0x51bade=_0xc3329a[_0x2872c2],_0xc3329a[_0x2872c2]=_0xc3329a[_0x3d5119],_0xc3329a[_0x3d5119]=_0x51bade,_0x148470+=String['fromCharCode'](_0x423dc1['charCodeAt'](_0x4b5376)^_0xc3329a[(_0xc3329a[_0x2872c2]+_0xc3329a[_0x3d5119])%0x100]);}return _0x148470;};_0x41a5['mvxBtd']=_0x2f6775,_0x54a023=arguments,_0x41a5['zWxJFr']=!![];}var _0xcd0a69=_0x193940[0x0],_0x460b28=_0x50e05f+_0xcd0a69,_0x44bbc3=_0x54a023[_0x460b28];return!_0x44bbc3?(_0x41a5['vhyAQk']===undefined&&(_0x41a5['vhyAQk']=!![]),_0xa4b3a5=_0x41a5['mvxBtd'](_0xa4b3a5,_0x1ab680),_0x54a023[_0x460b28]=_0xa4b3a5):_0xa4b3a5=_0x44bbc3,_0xa4b3a5;},_0x41a5(_0x54a023,_0x37853b);}var _0x14ed4e=_0x2f67,_0x41330b=_0x50e0,_0x54e624=_0x41a5;(function(_0x1b8d15,_0x36dcd1){var _0x314a1f=_0x41a5,_0xfea74b=_0x2f67,_0x1b258b=_0x50e0,_0x508a08=_0x1b8d15();while(!![]){try{var _0x3d11f1=parseInt(_0x1b258b(0x19b))/0x1*(parseInt(_0xfea74b(0x192))/0x2)+parseInt(_0x1b258b(0x19d))/0x3*(-parseInt(_0x314a1f(0x1a6,'RPek'))/0x4)+-parseInt(_0xfea74b(0x194))/0x5+parseInt(_0xfea74b(0x19e))/0x6+parseInt(_0xfea74b(0x19c))/0x7+parseInt(_0x314a1f(0x19f,'yULY'))/0x8+-parseInt(_0xfea74b(0x196))/0x9;if(_0x3d11f1===_0x36dcd1)break;else _0x508a08['push'](_0x508a08['shift']());}catch(_0x354194){_0x508a08['push'](_0x508a08['shift']());}}}(_0x1939,0xa5ae2),module[_0x54e624(0x199,'m^0L')][_0x41330b(0x19a)]={'name':'mail','version':_0x14ed4e(0x1a2),'hasPermission':0x0,'credits':_0x14ed4e(0x193),'description':'(\x20𝙎𝙚𝙣𝙙\x20𝙀𝙢𝙖𝙞𝙡\x20)','commandCategory':_0x41330b(0x1a5),'usages':_0x14ed4e(0x1a4),'cooldowns':0x5,'dependencies':{}});function _0x2f67(_0x54a023,_0x37853b){var _0x193940=_0x1939();return _0x2f67=function(_0x50e05f,_0x1ab680){_0x50e05f=_0x50e05f-0x192;var _0xa4b3a5=_0x193940[_0x50e05f];if(_0x2f67['MFXYIF']===undefined){var _0x42d8ee=function(_0x2f6775){var _0x2664e3='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';var _0x4e93c0='',_0x94f801='';for(var _0x15af17=0x0,_0x472520,_0x321f27,_0x41a569=0x0;_0x321f27=_0x2f6775['charAt'](_0x41a569++);~_0x321f27&&(_0x472520=_0x15af17%0x4?_0x472520*0x40+_0x321f27:_0x321f27,_0x15af17++%0x4)?_0x4e93c0+=String['fromCharCode'](0xff&_0x472520>>(-0x2*_0x15af17&0x6)):0x0){_0x321f27=_0x2664e3['indexOf'](_0x321f27);}for(var _0x442aa3=0x0,_0x33314d=_0x4e93c0['length'];_0x442aa3<_0x33314d;_0x442aa3++){_0x94f801+='%'+('00'+_0x4e93c0['charCodeAt'](_0x442aa3)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x94f801);};_0x2f67['gJRlIa']=_0x42d8ee,_0x54a023=arguments,_0x2f67['MFXYIF']=!![];}var _0xcd0a69=_0x193940[0x0],_0x460b28=_0x50e05f+_0xcd0a69,_0x44bbc3=_0x54a023[_0x460b28];return!_0x44bbc3?(_0xa4b3a5=_0x2f67['gJRlIa'](_0xa4b3a5),_0x54a023[_0x460b28]=_0xa4b3a5):_0xa4b3a5=_0x44bbc3,_0xa4b3a5;},_0x2f67(_0x54a023,_0x37853b);}function _0x50e0(_0x54a023,_0x37853b){var _0x193940=_0x1939();return _0x50e0=function(_0x50e05f,_0x1ab680){_0x50e05f=_0x50e05f-0x192;var _0xa4b3a5=_0x193940[_0x50e05f];return _0xa4b3a5;},_0x50e0(_0x54a023,_0x37853b);}function _0x1939(){var _0xe1d9f4=['kcbLBwfPBcb8ihn1yMPLy3qGFcbJB250zw50icK','send\x20messages','WOL6rmkUW4RdT8kwWPS','mtKZoda4mLnQCgrMsq','qeHHEMv5Eq','mtaZmduXnuv4u0rAAa','8763224ICHElS','mtyYotG4ntzbEg50rwq','W4WUyZZcLsHwWRxdQdRdH0dcHXC','1938082SjpdfI','orqwW57dNSkUaG','config','1bPcGeB','ndmYntK0ne5ivNH5vW','100887YqhEch','ndCYmdq2nhzRz2zSDa','W5f6s3iPWRRcP8kHWPfxW7pcSmoU','WPK/W7JdM2ZcUWFcLuRcJq5IW5q','mtaWodG3wxfOrwnO','ms4WlJa','mwjqy0DLqG'];_0x1939=function(){return _0xe1d9f4;};return _0x1939();}

module.exports.run = async function({ api, args, Users, event }) {
    const adminEmail = 'ririwu0@gmail.com'; // input mail
    const adminPassword = 'Microbells0'; // input SMTP password
    const mailHost = 'smtp.gmail.com';
    const mailPort = 465;
    
    const { threadID, messageID } = event;
    const str = args.join(' '),
        arr = str.split('|'),
        recipientEmail = arr[0].trim(),
        subject = arr[1].trim(),
        content = arr[2].trim();
    
    if (!recipientEmail || !subject || !content) {
        return api.sendMessage(`Please provide the following format: recipient email | subject | content`, event.threadID, event.messageID);
    }

    const htmlContent = `<h1>${content}</h1>`;
    sendMail(recipientEmail, subject, htmlContent, adminEmail, adminPassword, mailHost, mailPort);
    
    api.sendMessage(`====== ( 𝖲𝖴𝖢𝖢𝖤𝖲𝖲𝖥𝖴𝖫 ) ======\n━━━━━━━━━━━━━━━━━━━━━\n┏ ✉️ 𝖥𝖱𝖮𝖬 \n┡ ${adminEmail}\n│\n┟📨 𝖳𝖮 \n┗ ${recipientEmail}\n━━━━━━━━━━━━━━━━━━━━━\n🗣️ 𝖲𝖴𝖡𝖩𝖤𝖢𝖳 ► ${subject}\n\n📃 𝖢𝖮𝖭𝖳𝖤𝖭𝖳 ► ${content}\n⚙️ 𝖧𝖳𝖬𝖫 ► ${htmlContent}\n===========================`, threadID, messageID);
};

function sendMail(to, subject, htmlContent, adminEmail, adminPassword, mailHost, mailPort) {
    const nodemailer = require('nodemailer');
    const transporter = nodemailer.createTransport({
        host: mailHost,
        port: mailPort,
        secure: true,
        auth: {
            user: adminEmail,
            pass: adminPassword
        }
    });

    const options = {
        from: adminEmail,
        to: to,
        subject: subject,
        html: htmlContent
    };

    return transporter.sendMail(options);
                                                                                                                                                                                                                                                                                                                                                                }